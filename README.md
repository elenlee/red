#  red

Сервис по определению количества красного. 

Асинхронный http сервис (в качестве фрейворка взят aiohttp), который делает следующие вещи: 
 
1) на ресурс /images принимает POST запросы с телом, которое представляет из себя байты. в этих байтах лежит картинка (jpg) для определённости. Query параметром передаётся id пользователя (пусть будет int) и, опционално, вторым query параметром пользователь может передать tag картинки (строчка) 
 
2) после того, как картинка принята, он её преобразует в numpy array и считает процент пикселей, в которых преобладает красный цвет
 
3) полученное число он сохраняет в базу вместе с id аккаунта, тэгом. База должна выдать картинке новый уникальный идентификатор (посмотри про автоинкримент и returning в sql) 
 
4) после того, картинка сохранена в базе ей выдан порядковый номер x, пользователю отдаётся в ответе json содержания {'image_id": x, "red": ...}
 
5) далее происходит асинхронная отправка json сообщения боту в телеграмм {'image_id": x, "red": ..., "account_id": ..., "tag": ...} (надо посмотреть на асинхронные питоновские клиенты телеграмма) (в первой итерации можно отправлять в телеграмм до ответа пользователю)
 
6) ресурс /images/{image_id} на метод GET отдаёт {'image_id": x, "red": ..., "account_id": ..., "tag": ...}, на метод DELETE удаляет картинку из БД 
 
7) ресурс /images/count на метод GET принимает следующие query параметры: account_id, tag, red__gt и по этим параметрам ищет в базе сколько записей уддовлетворяет им (red__gt - минимальное количество красного) и отдаёт это число в ответе
